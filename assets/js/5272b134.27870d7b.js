"use strict";(self.webpackChunkfullstackbook=self.webpackChunkfullstackbook||[]).push([[4727],{3905:(e,a,n)=>{n.d(a,{Zo:()=>p,kt:()=>d});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function s(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?s(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=t.createContext({}),i=function(e){var a=t.useContext(u),n=a;return e&&(n="function"==typeof e?e(a):l(l({},a),e)),n},p=function(e){var a=i(e.components);return t.createElement(u.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,s=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=i(n),d=r,b=m["".concat(u,".").concat(d)]||m[d]||c[d]||s;return n?t.createElement(b,l(l({ref:a},p),{},{components:n})):t.createElement(b,l({ref:a},p))}));function d(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=n.length,l=new Array(s);l[0]=m;var o={};for(var u in a)hasOwnProperty.call(a,u)&&(o[u]=a[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var i=2;i<s;i++)l[i]=n[i];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5496:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>u,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>i});var t=n(7462),r=(n(7294),n(3905));const s={},l="PostgreSQL Cheat Sheet",o={unversionedId:"cheatsheets/postgresql",id:"cheatsheets/postgresql",title:"PostgreSQL Cheat Sheet",description:"SQL",source:"@site/docs/cheatsheets/postgresql.md",sourceDirName:"cheatsheets",slug:"/cheatsheets/postgresql",permalink:"/fullstackbook/cheatsheets/postgresql",draft:!1,editUrl:"https://github.com/travisluong/fullstackbook/tree/main/docs/cheatsheets/postgresql.md",tags:[],version:"current",frontMatter:{},sidebar:"cheatsheetSidebar",previous:{title:"Kubernetes Cheat Sheet",permalink:"/fullstackbook/cheatsheets/kubernetes"},next:{title:"Python Cheat Sheet",permalink:"/fullstackbook/cheatsheets/python"}},u={},i=[{value:"SQL",id:"sql",level:2},{value:"User Administration",id:"user-administration",level:2},{value:"psql",id:"psql",level:2},{value:"Backup and Restore Data",id:"backup-and-restore-data",level:2}],p={toc:i};function c(e){let{components:a,...n}=e;return(0,r.kt)("wrapper",(0,t.Z)({},p,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"postgresql-cheat-sheet"},"PostgreSQL Cheat Sheet"),(0,r.kt)("h2",{id:"sql"},"SQL"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- Create a table\nCREATE TABLE table_name (\n  column1 datatype1,\n  column2 datatype2,\n  column3 datatype3\n);\n\n-- Insert data into a table\nINSERT INTO table_name (column1, column2, column3)\nVALUES (value1, value2, value3);\n\n-- Select all data from a table\nSELECT * FROM table_name;\n\n-- Select specific columns from a table\nSELECT column1, column2 FROM table_name;\n\n-- Select data from a table with a condition\nSELECT * FROM table_name WHERE column1 = 'value';\n\n-- Update data in a table\nUPDATE table_name SET column1 = 'new_value' WHERE column2 = 'value';\n\n-- Delete data from a table\nDELETE FROM table_name WHERE column1 = 'value';\n\n-- Join two tables\nSELECT * FROM table1 JOIN table2 ON table1.column1 = table2.column2;\n\n-- Group data in a table\nSELECT column1, COUNT(*) FROM table_name GROUP BY column1;\n\n-- Order data in a table\nSELECT * FROM table_name ORDER BY column1 ASC;\n\n-- Limit the number of rows returned\nSELECT * FROM table_name LIMIT 10;\n\n-- Create an index on a table\nCREATE INDEX index_name ON table_name (column1);\n")),(0,r.kt)("h2",{id:"user-administration"},"User Administration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- Create a new user\nCREATE USER username WITH PASSWORD 'password';\n\n-- Grant privileges to a user\nGRANT privilege ON object TO user;\n\n-- Revoke privileges from a user\nREVOKE privilege ON object FROM user;\n\n-- Change a user's password\nALTER USER username WITH PASSWORD 'new_password';\n\n-- Delete a user\nDROP USER username;\n\n-- List all users and their attributes\nSELECT * FROM pg_user;\n\n-- Grant a role to a user\nGRANT role_name TO username;\n\n-- Remove a role from a user\nREVOKE role_name FROM username;\n\n-- List all roles and their attributes\nSELECT * FROM pg_roles;\n\n-- Create a new role\nCREATE ROLE role_name;\n\n-- Grant privileges to a role\nGRANT privilege ON object TO role_name;\n\n-- Revoke privileges from a role\nREVOKE privilege ON object FROM role_name;\n\n-- Delete a role\nDROP ROLE role_name;\n\n-- Create a group role\nCREATE ROLE group_role_name WITH ROLE role_name;\n\n-- Add a user to a group role\nGRANT group_role_name TO username;\n\n-- Remove a user from a group role\nREVOKE group_role_name FROM username;\n\n-- List all objects owned by a user\nSELECT * FROM pg_catalog.pg_class WHERE relowner = 'username';\n\n-- Transfer ownership of an object to a user\nALTER TABLE table_name OWNER TO new_owner;\n\n-- List all privileges for an object\nSELECT grantee, privilege_type FROM information_schema.table_privileges WHERE table_name = 'table_name';\n\n-- List all privileges for a user\nSELECT * FROM information_schema.role_table_grants WHERE grantee = 'username';\n")),(0,r.kt)("h2",{id:"psql"},"psql"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- Connect to a PostgreSQL server\npsql -h hostname -p port -U username -d database_name\n\n-- Connect to a PostgreSQL server using a Unix domain socket\npsql -h /path/to/socket -U username -d database_name\n\n-- Connect to a PostgreSQL server and run a single SQL command\npsql -h hostname -p port -U username -d database_name -c \"SQL command\"\n\n-- Execute a SQL script file\npsql -h hostname -p port -U username -d database_name -f script_file.sql\n\n-- Display help for psql commands\n\\?\n\n-- List available databases\n\\l\n\n-- Connect to a specific database\n\\c database_name\n\n-- List available tables in the current database\n\\dt\n\n-- Describe a table\n\\d table_name\n\n-- List available functions in the current database\n\\df\n\n-- Describe a function\n\\df+ function_name\n\n-- Execute a SQL command and display results\nSELECT * FROM table_name;\n\n-- Display query output in an aligned format\n\\x auto\n\n-- Display query output in a vertical format\n\\x on\n\n-- Display query output in a unaligned format\n\\x off\n\n-- Display query execution time\n\\timing on\n\n-- Display psql output in a pager\n\\setenv PAGER less\n\\pset pager always\n\n-- Change the psql prompt\n\\set PROMPT1 '%[%033[1;32m%]%n@%/%R%[%033[0m%]%# '\n\n-- Display previous command(s)\n\\s\n\n-- Edit the current query buffer\n\\edit\n\n-- Save the current query buffer to a file\n\\o file_name\n\n-- Execute a command from a file\n\\i file_name\n\n-- Clear the screen\n\\! clear\n\n-- Quit psql\n\\q\n\n\n")),(0,r.kt)("h2",{id:"backup-and-restore-data"},"Backup and Restore Data"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'-- Create a backup of a database to a file\npg_dump -Fc database_name > backup_file.dump\n\n-- Create a backup of a specific table to a file\npg_dump -Fc -t table_name database_name > backup_file.dump\n\n-- Restore a backup from a file\npg_restore -d database_name backup_file.dump\n\n-- Restore a specific table from a backup file\npg_restore -t table_name -d database_name backup_file.dump\n\n-- Restore a backup with custom options\npg_restore --dbname=database_name --clean --create backup_file.dump\n\n-- Create a plain-text SQL script of a database\npg_dump -s database_name > backup_file.sql\n\n-- Restore a plain-text SQL script to a database\npsql -d database_name -f backup_file.sql\n\n-- Dump a database to a compressed file\npg_dump -Z9 database_name > backup_file.sql.gz\n\n-- Restore a compressed backup file\ngunzip -c backup_file.sql.gz | psql -d database_name\n\n-- Dump a database and exclude certain tables\npg_dump -Fc -T excluded_table_1 -T excluded_table_2 database_name > backup_file.dump\n\n-- Dump a database with custom options\npg_dump --dbname=database_name --exclude-table-data=table_name --format=custom --file=backup_file.dump\n\n-- Backup a database to a remote server\npg_dump -Fc database_name | ssh user@remote_host "cat > backup_file.dump"\n\n-- Restore a database from a remote server\nssh user@remote_host "cat backup_file.dump" | pg_restore -d database_name\n\n')))}c.isMDXComponent=!0}}]);