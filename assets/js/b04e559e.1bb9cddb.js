"use strict";(self.webpackChunkfullstackbook=self.webpackChunkfullstackbook||[]).push([[9835],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=o.createContext({}),d=function(e){var n=o.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=d(e.components);return o.createElement(i.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},u=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,i=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),u=d(t),m=a,f=u["".concat(i,".").concat(m)]||u[m]||p[m]||s;return t?o.createElement(f,l(l({ref:n},c),{},{components:t})):o.createElement(f,l({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,l=new Array(s);l[0]=u;var r={};for(var i in n)hasOwnProperty.call(n,i)&&(r[i]=n[i]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var d=2;d<s;d++)l[d]=t[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5767:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var o=t(7462),a=(t(7294),t(3905));const s={},l="Next.js To Do UI",r={unversionedId:"code/nextjs-todo",id:"code/nextjs-todo",title:"Next.js To Do UI",description:"- https://github.com/travisluong/fullstackbook-todo-nextjs",source:"@site/docs/code/nextjs-todo.md",sourceDirName:"code",slug:"/code/nextjs-todo",permalink:"/docs/code/nextjs-todo",draft:!1,editUrl:"https://github.com/travisluong/fullstackbook/tree/main/docs/code/nextjs-todo.md",tags:[],version:"current",frontMatter:{},sidebar:"codeSidebar",previous:{title:"Next.js API Routes",permalink:"/docs/code/nextjs-todo-api"},next:{title:"NuxtJS To Do UI",permalink:"/docs/code/nuxtjs-todo"}},i={},d=[{value:"Command Line",id:"command-line",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Pages",id:"pages",level:2},{value:"Components",id:"components",level:2},{value:"Styles",id:"styles",level:2}],c={toc:d};function p(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"nextjs-to-do-ui"},"Next.js To Do UI"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/travisluong/fullstackbook-todo-nextjs"},"https://github.com/travisluong/fullstackbook-todo-nextjs")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://youtu.be/9jUh0Y2A3X4"},"Full Stack NestJS + Next.js Tutorial")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://youtu.be/Z_4Tqmv8Oa4"},"Full Stack Spring Boot + Next.js Tutorial")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://youtu.be/HJ314MNcCck"},"Full Stack FastAPI + Next.js Tutorial"))),(0,a.kt)("h2",{id:"command-line"},"Command Line"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Terminal"',title:'"Terminal"'},"npx create-next-app@latest\nnpm run dev\n")),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-txt",metastring:'title=".env.example"',title:'".env.example"'},"NEXT_PUBLIC_API_URL=http://localhost:8000\n")),(0,a.kt)("h2",{id:"pages"},"Pages"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="pages/index.js"',title:'"pages/index.js"'},'import Head from \'next/head\'\nimport Layout from \'../components/layout\';\nimport ToDoList from \'../components/todo-list\';\n\nexport default function Home() {\n  return (\n    <div>\n      <Head>\n        <title>Full Stack Book To Do</title>\n        <meta name="description" content="Full Stack Book To Do" />\n        <link rel="icon" href="/favicon.ico" />\n      </Head>\n      <Layout>\n        <ToDoList />\n      </Layout>\n    </div>\n  )\n}\n')),(0,a.kt)("h2",{id:"components"},"Components"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/layout.js"',title:'"components/layout.js"'},"import styles from '../styles/layout.module.css'\n\nexport default function Layout(props) {\n  return (\n    <div className={styles.layout}>\n      <h1 className={styles.title}>To Do</h1>\n      {props.children}\n    </div>\n  )\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/todo-list.js"',title:'"components/todo-list.js"'},"import styles from '../styles/todo-list.module.css'\nimport { useState, useEffect, useCallback, useRef } from 'react'\nimport { debounce } from 'lodash'\nimport ToDo from './todo'\n\nexport default function ToDoList() {\n  const [todos, setTodos] = useState(null)\n  const [mainInput, setMainInput] = useState('')\n  const [filter, setFilter] = useState()\n  const didFetchRef = useRef(false)\n\n  useEffect(() => {\n    if (didFetchRef.current === false) {\n      didFetchRef.current = true\n      fetchTodos()\n    }\n  }, [])\n\n  async function fetchTodos(completed) {\n    let path = '/todos'\n    if (completed !== undefined) {\n      path = `/todos?completed=${completed}`\n    }\n    const res = await fetch(process.env.NEXT_PUBLIC_API_URL + path)\n    const json = await res.json()\n    setTodos(json)\n  }\n\n  const debouncedUpdateTodo = useCallback(debounce(updateTodo, 500), [])\n\n  function handleToDoChange(e, id) {\n    const target = e.target\n    const value = target.type === 'checkbox' ? target.checked : target.value\n    const name = target.name\n    const copy = [...todos]\n    const idx = todos.findIndex((todo) => todo.id === id)\n    const changedToDo = {\n      ...todos[idx],\n      [name]: value\n    }\n    copy[idx] = changedToDo\n    debouncedUpdateTodo(changedToDo)\n    setTodos(copy)\n  }\n\n  async function updateTodo(todo) {\n    const data = {\n      name: todo.name,\n      completed: todo.completed\n    }\n    const res = await fetch(process.env.NEXT_PUBLIC_API_URL + `/todos/${todo.id}`, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n  }\n\n  async function addToDo(name) {\n    const res = await fetch(process.env.NEXT_PUBLIC_API_URL + `/todos/`, {\n      method: 'POST',\n      body: JSON.stringify({\n        name: name,\n        completed: false\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    if (res.ok) {\n      const json = await res.json();\n      const copy = [...todos, json]\n      setTodos(copy)\n    }\n  }\n\n  async function handleDeleteToDo(id) {\n    const res = await fetch(process.env.NEXT_PUBLIC_API_URL + `/todos/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    if (res.ok) {\n      const idx = todos.findIndex((todo) => todo.id === id)\n      const copy = [...todos]\n      copy.splice(idx, 1)\n      setTodos(copy)\n    }\n  }\n\n  function handleMainInputChange(e) {\n    setMainInput(e.target.value)\n  }\n\n  function handleKeyDown(e) {\n    if (e.key === 'Enter') {\n      if (mainInput.length > 0) {\n        addToDo(mainInput)\n        setMainInput('')\n      }\n    }\n  }\n\n  function handleFilterChange(value) {\n    setFilter(value)\n    fetchTodos(value)\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.mainInputContainer}>\n        <input className={styles.mainInput} placeholder=\"What needs to be done?\" value={mainInput} onChange={(e) => handleMainInputChange(e)} onKeyDown={handleKeyDown}></input>\n      </div>\n      {!todos && (\n        <div>Loading...</div>\n      )}\n      {todos && (\n        <div>\n          {todos.map((todo) => {\n            return (\n              <ToDo todo={todo} onDelete={handleDeleteToDo} onChange={handleToDoChange} />\n            )\n          })}\n        </div>\n      )}\n      <div className={styles.filters}>\n        <button className={`${styles.filterBtn} ${filter === undefined && styles.filterActive}`} onClick={() => handleFilterChange()}>All</button>\n        <button className={`${styles.filterBtn} ${filter === false && styles.filterActive}`} onClick={() => handleFilterChange(false)}>Active</button>\n        <button className={`${styles.filterBtn} ${filter === true && styles.filterActive}`} onClick={() => handleFilterChange(true)}>Completed</button>\n      </div>\n    </div>\n  )\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="components/todo.js"',title:'"components/todo.js"'},'import Image from \'next/image\'\nimport styles from \'../styles/todo.module.css\'\n\nexport default function ToDo(props) {\n  const { todo, onChange, onDelete } = props;\n  return (\n    <div className={styles.toDoRow} key={todo.id}>\n      <input className={styles.toDoCheckbox} name="completed" type="checkbox" checked={todo.completed} value={todo.completed} onChange={(e) => onChange(e, todo.id)}></input>\n      <input className={styles.todoInput} autoComplete=\'off\' name="name" type="text" value={todo.name} onChange={(e) => onChange(e, todo.id)}></input>\n      <button className={styles.deleteBtn} onClick={() => onDelete(todo.id)}><Image src="/material-symbols_delete-outline-sharp.svg" width="24px" height="24px" /></button>\n    </div>\n  )\n}\n')),(0,a.kt)("h2",{id:"styles"},"Styles"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="styles/layout.module.css"',title:'"styles/layout.module.css"'},".layout {\n    width: 300px;\n    margin: 20px;\n}\n\n.title {\n    text-align: center;\n    font-size: 24px;\n    margin: 10px;\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="styles/todo-list.module.css"',title:'"styles/todo-list.module.css"'},".container {\n  width: 300px;\n  border: 1px solid black;\n}\n\n.mainInputContainer {\n  width: 100%;\n  margin: 20px 0;\n}\n\n.mainInput {\n  padding: 5px;\n  border: 1px solid black;\n  margin: auto;\n  display: block;\n  width: 260px;\n  height: 40px;\n}\n\n.filters {\n  display: flex;\n  justify-content: space-between;\n  padding: 20px;\n  margin-top: 20px;\n  border-top: 1px solid black;\n}\n\n.filterBtn {\n  background: none;\n  border: none;\n  cursor: pointer;\n}\n\n.filterActive {\n  text-decoration: underline;\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="styles/todo.module.css"',title:'"styles/todo.module.css"'},".todoInput {\n    padding: 5px;\n    border: 1px solid black;\n    width: 194px;\n    height: 40px;\n    margin: 5px;\n}\n\n.toDoRow {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin: 5px 20px;\n}\n\n.deleteBtn {\n    background: none;\n    border: 0;\n    cursor: pointer;\n}\n")))}p.isMDXComponent=!0}}]);