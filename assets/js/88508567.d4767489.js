"use strict";(self.webpackChunkfullstackbook=self.webpackChunkfullstackbook||[]).push([[4158],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>d});var r=t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=c(t),d=s,_=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return t?r.createElement(_,a(a({ref:n},u),{},{components:t})):r.createElement(_,a({ref:n},u))}));function d(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var o=t.length,a=new Array(o);a[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,a[1]=i;for(var c=2;c<o;c++)a[c]=t[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},903:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=t(7462),s=(t(7294),t(3905));const o={},a="JWT FastAPI",i={unversionedId:"projects/jwt/backend/fastapi",id:"projects/jwt/backend/fastapi",title:"JWT FastAPI",description:"https://github.com/travisluong/fullstackbook-jwt-fastapi",source:"@site/docs/projects/jwt/backend/fastapi.md",sourceDirName:"projects/jwt/backend",slug:"/projects/jwt/backend/fastapi",permalink:"/docs/projects/jwt/backend/fastapi",draft:!1,editUrl:"https://github.com/travisluong/fullstackbook/tree/main/docs/projects/jwt/backend/fastapi.md",tags:[],version:"current",frontMatter:{},sidebar:"projectsSidebar",previous:{title:"JWT Back End",permalink:"/docs/category/jwt-back-end"},next:{title:"JWT Spring Boot",permalink:"/docs/projects/jwt/backend/springboot"}},l={},c=[{value:"Command Line",id:"command-line",level:2},{value:"Database Migration",id:"database-migration",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Routers",id:"routers",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Database",id:"database",level:2},{value:"Main",id:"main",level:2},{value:"Model",id:"model",level:2},{value:"Schemas",id:"schemas",level:2}],u={toc:c};function p(e){let{components:n,...t}=e;return(0,s.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"jwt-fastapi"},"JWT FastAPI"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://github.com/travisluong/fullstackbook-jwt-fastapi"},"https://github.com/travisluong/fullstackbook-jwt-fastapi")),(0,s.kt)("h2",{id:"command-line"},"Command Line"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Terminal"',title:'"Terminal"'},'pip install fastapi "uvicorn[standard]" alembic pyscopg2 "python-jose[cryptography]" "passlib[bcrypt]" python-multipart\npip freeze > requirements.txt\nalembic init alembic\nalembic revision -m "create users table"\nalembic revision -m "create roles table"\nalembic revision -m "create users_to_roles table"\nalembic upgrade head\nuvicorn main:app --reload\n')),(0,s.kt)("h2",{id:"database-migration"},"Database Migration"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="alembic/env.py"',title:'"alembic/env.py"'},'import os\nfrom logging.config import fileConfig\n\nfrom sqlalchemy import engine_from_config\nfrom sqlalchemy import pool\n\nfrom alembic import context\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\n# this is the Alembic Config object, which provides\n# access to the values within the .ini file in use.\nconfig = context.config\n\nconfig.set_main_option(\'sqlalchemy.url\', f"postgresql://{os.environ[\'DATABASE_USER\']}:@{os.environ[\'DATABASE_HOST\']}/{os.environ[\'DATABASE_NAME\']}")\n\n# Interpret the config file for Python logging.\n# This line sets up loggers basically.\nif config.config_file_name is not None:\n    fileConfig(config.config_file_name)\n\n# add your model\'s MetaData object here\n# for \'autogenerate\' support\n# from myapp import mymodel\n# target_metadata = mymodel.Base.metadata\ntarget_metadata = None\n\n# other values from the config, defined by the needs of env.py,\n# can be acquired:\n# my_important_option = config.get_main_option("my_important_option")\n# ... etc.\n\n\ndef run_migrations_offline() -> None:\n    """Run migrations in \'offline\' mode.\n\n    This configures the context with just a URL\n    and not an Engine, though an Engine is acceptable\n    here as well.  By skipping the Engine creation\n    we don\'t even need a DBAPI to be available.\n\n    Calls to context.execute() here emit the given string to the\n    script output.\n\n    """\n    url = config.get_main_option("sqlalchemy.url")\n    context.configure(\n        url=url,\n        target_metadata=target_metadata,\n        literal_binds=True,\n        dialect_opts={"paramstyle": "named"},\n    )\n\n    with context.begin_transaction():\n        context.run_migrations()\n\n\ndef run_migrations_online() -> None:\n    """Run migrations in \'online\' mode.\n\n    In this scenario we need to create an Engine\n    and associate a connection with the context.\n\n    """\n    connectable = engine_from_config(\n        config.get_section(config.config_ini_section),\n        prefix="sqlalchemy.",\n        poolclass=pool.NullPool,\n    )\n\n    with connectable.connect() as connection:\n        context.configure(\n            connection=connection, target_metadata=target_metadata\n        )\n\n        with context.begin_transaction():\n            context.run_migrations()\n\n\nif context.is_offline_mode():\n    run_migrations_offline()\nelse:\n    run_migrations_online()\n\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="alembic/versions/2d8360fae38a_create_users_to_roles_table.py"',title:'"alembic/versions/2d8360fae38a_create_users_to_roles_table.py"'},'"""create users_to_roles table\n\nRevision ID: 2d8360fae38a\nRevises: 9ce62b651a8f\nCreate Date: 2022-08-31 21:02:25.266259\n\n"""\nfrom alembic import op\nimport sqlalchemy as sa\n\n\n# revision identifiers, used by Alembic.\nrevision = \'2d8360fae38a\'\ndown_revision = \'9ce62b651a8f\'\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    op.execute("""\n    create table users_to_roles (\n        user_id int references users (id),\n        role_id int references roles (id)\n    );\n    """)\n\n\ndef downgrade() -> None:\n    op.execute("drop table users_to_roles;")\n\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="alembic/versions/9ce62b651a8f_create_roles_table.py"',title:'"alembic/versions/9ce62b651a8f_create_roles_table.py"'},'"""create roles table\n\nRevision ID: 9ce62b651a8f\nRevises: 481b1e04c901\nCreate Date: 2022-08-31 21:02:10.601736\n\n"""\nfrom alembic import op\nimport sqlalchemy as sa\n\n\n# revision identifiers, used by Alembic.\nrevision = \'9ce62b651a8f\'\ndown_revision = \'481b1e04c901\'\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    op.execute("""\n    create table roles (\n        id serial primary key,\n        name text not null unique\n    );\n    """)\n\n\ndef downgrade() -> None:\n    op.execute("drop table roles;")\n\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="alembic/versions/481b1e04c901_create_users_table.py"',title:'"alembic/versions/481b1e04c901_create_users_table.py"'},'"""create users table\n\nRevision ID: 481b1e04c901\nRevises: \nCreate Date: 2022-08-30 20:56:35.188712\n\n"""\nfrom alembic import op\nimport sqlalchemy as sa\n\n\n# revision identifiers, used by Alembic.\nrevision = \'481b1e04c901\'\ndown_revision = None\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    op.execute("""\n    create table users (\n        id serial primary key,\n        username text not null unique,\n        email text not null unique,\n        password text\n    );\n    """)\n\n\ndef downgrade() -> None:\n    op.execute("drop table users;")\n\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sql",metastring:'title="alembic/versions/ece871602084_insert_roles.py"',title:'"alembic/versions/ece871602084_insert_roles.py"'},'"""insert roles\n\nRevision ID: ece871602084\nRevises: 2d8360fae38a\nCreate Date: 2022-08-31 21:05:14.000853\n\n"""\nfrom alembic import op\nimport sqlalchemy as sa\n\n\n# revision identifiers, used by Alembic.\nrevision = \'ece871602084\'\ndown_revision = \'2d8360fae38a\'\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    op.execute("""\n    insert into roles (name) values (\'ROLE_USER\');\n    insert into roles (name) values (\'ROLE_MODERATOR\');\n    insert into roles (name) values (\'ROLE_ADMIN\');\n    """)\n\n\ndef downgrade() -> None:\n    op.execute("""\n    delete from roles where name in (\'ROLE_USER\', \'ROLE_MODERATOR\', \'ROLE_ADMIN\');\n    """)\n\n')),(0,s.kt)("h2",{id:"dependencies"},"Dependencies"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="dependencies/auth.py"',title:'"dependencies/auth.py"'},'from typing import Optional\nfrom fastapi import Depends, HTTPException, status\nfrom sqlalchemy.orm import Session\nfrom datetime import datetime, timedelta\nfrom fastapi.security import OAuth2PasswordBearer\nfrom jose import JWTError, jwt\nfrom passlib.context import CryptContext\n\nfrom database import engine\nfrom model import User\nfrom schemas import TokenData\n\n# to get a string like this run:\n# openssl rand -hex 32\nSECRET_KEY = "09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7"\nALGORITHM = "HS256"\n\npwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")\n\noauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")\n\ndef verify_password(plain_password, hashed_password):\n    return pwd_context.verify(plain_password, hashed_password)\n\ndef get_password_hash(password):\n    return pwd_context.hash(password)\n\ndef authenticate_user(username: str, password: str):\n    with Session(engine) as session:\n        results = session.query(User).filter(User.username == username)\n        user = results.first()\n\n        if not user:\n            return False\n        if not verify_password(password, user.password):\n            return False\n        return user\n\ndef create_access_token(data: dict, expires_delta: Optional[timedelta] = None):\n    to_encode = data.copy()\n    if expires_delta:\n        expire = datetime.utcnow() + expires_delta\n    else:\n        expire = datetime.utcnow() + timedelta(minutes=15)\n    to_encode.update({"exp": expire})\n    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n    return encoded_jwt\n\ndef get_current_user(token: str = Depends(oauth2_scheme)):\n    with Session(engine) as session:\n        credentials_exception = HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail="Could not validate credentials",\n            headers={"WWW-Authenticate": "Bearer"},\n        )\n        try:\n            payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n            username: str = payload.get("sub")\n            if username is None:\n                raise credentials_exception\n            token_data = TokenData(username=username)\n        except JWTError:\n            raise credentials_exception\n        results = session.query(User).filter(User.username == token_data.username)\n        user = results.first()\n        if user is None:\n            raise credentials_exception\n        return user\n\ndef get_current_active_user(current_user: User = Depends(get_current_user)):\n    return current_user\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="dependencies/roles.py"',title:'"dependencies/roles.py"'},"from sqlalchemy.orm import Session\nfrom fastapi import Depends, HTTPException\n\nfrom database import get_session\nfrom model import Role, User, UserToRole\nfrom routers.auth import get_current_active_user\n\ndef admin_role(session: Session = Depends(get_session), current_user: User = Depends(get_current_active_user)):\n    roles = session.query(Role).filter(Role.name.in_(['ROLE_ADMIN']))\n    role_ids = [role.id for role in roles]\n    user_to_roles = session.query(UserToRole).filter(UserToRole.user_id == current_user.id).filter(UserToRole.role_id.in_(role_ids)).all()\n    if len(user_to_roles) == 0:\n        raise HTTPException(403, \"Unauthorized.\")\n    return current_user\n\ndef moderator_role(session: Session = Depends(get_session), current_user: User = Depends(get_current_active_user)):\n    roles = session.query(Role).filter(Role.name.in_(['ROLE_MODERATOR']))\n    role_ids = [role.id for role in roles]\n    user_to_roles = session.query(UserToRole).filter(UserToRole.user_id == current_user.id).filter(UserToRole.role_id.in_(role_ids)).all()\n    if len(user_to_roles) == 0:\n        raise HTTPException(403, \"Unauthorized.\")\n    return current_user\n\ndef user_role(session: Session = Depends(get_session), current_user: User = Depends(get_current_active_user)):\n    roles = session.query(Role).filter(Role.name.in_(['ROLE_USER', 'ROLE_MODERATOR', 'ROLE_ADMIN']))\n    role_ids = [role.id for role in roles]\n    user_to_roles = session.query(UserToRole).filter(UserToRole.user_id == current_user.id).filter(UserToRole.role_id.in_(role_ids)).all()\n    if len(user_to_roles) == 0:\n        raise HTTPException(403, \"Unauthorized.\")\n    return current_user\n")),(0,s.kt)("h2",{id:"routers"},"Routers"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="routers/auth.py"',title:'"routers/auth.py"'},'from fastapi import APIRouter, Depends, HTTPException, status\nfrom sqlalchemy.orm import Session\nfrom datetime import timedelta\nfrom fastapi.security import OAuth2PasswordRequestForm\n\nfrom database import get_session\nfrom dependencies.auth import authenticate_user, create_access_token, get_current_active_user, get_password_hash\nfrom model import User, Role, UserToRole\nfrom schemas import SignInRequest, Token, UserIn, UserRead\n\nrouter = APIRouter(prefix="/api/auth")\n\nACCESS_TOKEN_EXPIRE_MINUTES = 43200\n\n@router.post("/token", response_model=Token)\ndef login_for_access_token(\n    form_data: OAuth2PasswordRequestForm = Depends()\n):\n    user = authenticate_user(form_data.username, form_data.password)\n    if not user:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail="Incorrect username or password",\n            headers={"WWW-Authenticate": "Bearer"},\n        )\n    access_token_expires = timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    access_token = create_access_token(\n        data={"sub": user.username}, expires_delta=access_token_expires\n    )\n    return {"token": access_token, "token_type": "bearer"}\n\n@router.post("/signin", response_model=Token)\ndef login_for_access_token(\n    signin_request: SignInRequest\n):\n    user = authenticate_user(signin_request.username, signin_request.password)\n    if not user:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail="Incorrect username or password",\n            headers={"WWW-Authenticate": "Bearer"},\n        )\n    access_token_expires = timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    access_token = create_access_token(\n        data={"sub": user.username}, expires_delta=access_token_expires\n    )\n    return {"token": access_token, "token_type": "bearer"}\n\n@router.get("/users/me", response_model=UserRead)\ndef read_users_me(current_user: User = Depends(get_current_active_user)):\n    user = UserRead(username=current_user.username, email=current_user.email)\n    return user\n\n@router.get("/users/me/items")\ndef read_own_items(current_user: User = Depends(get_current_active_user)):\n    return [{"item_id": "Foo", "owner": current_user.username}]\n\n@router.post("/signup", response_model=UserRead)\ndef sign_up(user: UserIn, session: Session = Depends(get_session)):\n    hashed_password = get_password_hash(user.password)\n    role = session.query(Role).filter(Role.name == "ROLE_USER").first()\n    user_to_role = UserToRole()\n    user_to_role.role = role\n    new_user = User(email=user.email, username=user.username, password=hashed_password)\n    new_user.roles.append(user_to_role)\n    session.add(new_user)\n    session.commit()\n    session.refresh(new_user)\n    return UserRead(username=new_user.username, email=new_user.email)\n\n\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="routers/content.py"',title:'"routers/content.py"'},'from fastapi import APIRouter, Depends\nfrom dependencies.auth import get_current_active_user\n\nfrom dependencies.roles import admin_role, moderator_role, user_role\nfrom model import User\nfrom schemas import UserRead\n\nrouter = APIRouter(prefix="/api/test")\n\n@router.get("/admin")\ndef admin(current_user = Depends(admin_role)):\n    return "admin content"\n\n@router.get("/user")\ndef user(current_user = Depends(user_role)):\n    return "user content"\n\n@router.get("/mod")\ndef moderator(current_user = Depends(moderator_role)):\n    return "moderator content"\n\n@router.get("/all")\ndef all():\n    return "public content"\n\n@router.get("/profile", response_model=UserRead)\ndef read_users_me(current_user: User = Depends(get_current_active_user)):\n    user = UserRead(username=current_user.username, email=current_user.email)\n    return user\n')),(0,s.kt)("h2",{id:"configuration"},"Configuration"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title=".env.example"',title:'".env.example"'},'DATABASE_HOST=localhost\nDATABASE_NAME=fullstackbook-jwt-fastapi\nDATABASE_USER=postgres\nDATABASE_PASSWORD=\nDATABASE_PORT=5432\nAPP_NAME="Full Stack Book JWT"\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="config.py"',title:'"config.py"'},'from pydantic import BaseSettings\n\nclass Settings(BaseSettings):\n    app_name: str = "Awesome API"\n\n    class Config:\n        env_file = ".env"\n')),(0,s.kt)("h2",{id:"database"},"Database"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="database.py"',title:'"database.py"'},"import os\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker, Session\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nSQLALCHEMY_DATABASE_URL = f\"postgresql://{os.environ['DATABASE_USER']}:@{os.environ['DATABASE_HOST']}/{os.environ['DATABASE_NAME']}\"\n\nengine = create_engine(\n    SQLALCHEMY_DATABASE_URL\n)\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n\nBase = declarative_base()\n\ndef get_session():\n    with Session(engine) as session:\n        yield session\n")),(0,s.kt)("h2",{id:"main"},"Main"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="main.py"',title:'"main.py"'},'from functools import lru_cache\n\nfrom fastapi import FastAPI, Depends\nfrom fastapi.responses import PlainTextResponse\nfrom starlette.exceptions import HTTPException as StarletteHTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\n\nfrom routers import auth, content\n\nimport config\n\napp = FastAPI()\napp.include_router(auth.router)\napp.include_router(content.router)\n\norigins = [\n    "http://localhost:3000",\n]\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=origins,\n    allow_credentials=True,\n    allow_methods=["*"],\n    allow_headers=["*"],\n)\n\n@app.exception_handler(StarletteHTTPException)\nasync def http_exception_handler(request, exc):\n    print(f"{repr(exc)}")\n    return PlainTextResponse(str(exc.detail), status_code=exc.status_code)\n\n@lru_cache()\ndef get_settings():\n    return config.Settings()\n\n@app.get("/")\ndef read_root(settings: config.Settings = Depends(get_settings)):\n    print(settings.app_name)\n    return "Hello World"\n\n')),(0,s.kt)("h2",{id:"model"},"Model"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="model.py"',title:'"model.py"'},'from sqlalchemy import Boolean, Column, ForeignKey, Integer, String\nfrom sqlalchemy.orm import relationship\n\nfrom database import Base\n\nclass UserToRole(Base):\n    __tablename__ = "users_to_roles"\n    \n    user_id = Column(ForeignKey("users.id"), primary_key=True)\n    role_id = Column(ForeignKey("roles.id"), primary_key=True)\n    user = relationship("User", back_populates="roles")\n    role = relationship("Role", back_populates="users")\n\nclass User(Base):\n    __tablename__ = "users"\n\n    id = Column(Integer, primary_key=True, index=True)\n    username = Column(String)\n    email = Column(String)\n    password = Column(String)\n    roles = relationship("UserToRole", back_populates="user")\n\nclass Role(Base):\n    __tablename__ = "roles"\n\n    id = Column(Integer, primary_key=True, index=True)\n    name = Column(String)\n    users = relationship("UserToRole", back_populates="role")\n\n\n')),(0,s.kt)("h2",{id:"schemas"},"Schemas"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="schemas.py"',title:'"schemas.py"'},"from typing import Optional\nfrom pydantic import BaseModel\n\nclass SignInRequest(BaseModel):\n    username: str\n    password: str\n\nclass Token(BaseModel):\n    token: str\n    token_type: str\n\nclass TokenData(BaseModel):\n    username: Optional[str] = None\n\nclass UserIn(BaseModel):\n    username: str\n    email: str\n    password: str\n\nclass UserRead(BaseModel):\n    username: str\n    email: str\n")))}p.isMDXComponent=!0}}]);